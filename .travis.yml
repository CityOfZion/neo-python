language: python
python:
  - "3.6"

env:
  global:
    # Docker username and password
    - secure: "k+IwHSSBwJlgH1BwJtL+lzm8ZftZIewOOgnPor+ydXTfwnK6a9D04C+FifrQWApOqB7nYSdYTarKz/1rh/dNy8OIW62AOG3G4wfdCVORB+G3PENxlXaqoEpm1Qap8KRHL3tSLZmlzoE1VnLe6r4sYNkn0JcQdDKeyI1hJWQd4x4RqaiGZXjP+RpCoLGfiQVJNY9HqvSPhBMMNt/NOss2+Rk/QgPMcMv4dCBWppZUk5SRC2GVDyqCA4HqdRv1D8FBVXem2PepSJ2hX0P4gJjqtiCBHwGB8opSIaAkTqH0vayxxfz6r+KHw8NLz2BaKyW4EcSjDsOWUlZBpHysMvRT2/Vf0KzYSoQoJjQIbHxX1hQQ39gIoB2ngaFpWi07WcCLLRrWiQA/0qopiM2iDAYq2Bw8pzVENahZl7ewW1woZeBuO/O/wkHkvEAqO+1QKZ0BILGQS/mN/QZclXlDK6BpUGpTujrNta4+O2ZOBm3AdGycgx8Hqjj82CaquLNgGeOM6GjZN3p2kZ2MB0KDYVv1FcvGTpCvfHsHvWPblVrUG3P3MjlEM4TUVH9G8foV9v3Ek1QXJTNbePcJyK1fodnjpp5c9uwN2zMylDMgoIzlnyoyvV8PdERjpE2oTuebuHh0eX0NyXBTx9UyYf43ON29kmYj/G60HNbvaLUpKhjlWnQ="
    - secure: "MzH58n1jDaCvA24jJ6zm1KJZfNNB5LwvZj1G/oPlpyj7OrC2eq02QEkf+nd0fk0cdhnR21fwjgKwbJZq9TPpZed7PQpuxxzu0tGVr6dEQmxk90lRr7ZYSfNqit7pmj+HgUy3ECzt1oLVsce7iWlJKPhdRSzcFggUoeHWcSarXni7OW9TIS/exFtpZ+f5/yAIx/quCnl7UTolODnR7VxSpr+UsBDWUCSQpLWxufWPvfSfCu9POx2HWOoIsoF9ovwsCK4zxdR21kvTPgBjfKnDnNoO7LudmGynlgq4sX5UDeIpJbX+FMCfTo3DprXt5tXWslWFuxgNFsEvydaribf4O/i+V21DODg3vTv4EtCRm+3yeSUoCNz2CPn4JxudJGDBX3E7fyeau9sU8CINqCEWC83oYgXgNUEjZj9Q1747bvji1iD/sRUwRSZDPAr7wY6QwrckXPnrnDIr3sQyylwk73W3zmuQC6xyWU2P3UO0MOQp3QRl+ft3MDTZ842CFkbKrg5UKHE1RiS8vu+rtpNR4Xv7p4hLN1dtvY/S8H8q727lCHYv3RL25OU0arLJ/hhV6DP6klBnpMJQCLXqXoxP2ngZWw6Am9sgJlQG1NNrLv9Mbk6SldYvpK/DEZjH1MgMhF5Cmgjzej49r7neVpUrFmarWmRkImSxhXqEMU+vCjQ="

addons:
  apt:
    packages:
    - libleveldb-dev
    - libsqlite3-dev

# command to install dependencies
install:
  - pip install -r requirements.txt
  - pip install coveralls

# command to run tests
script:
  - coverage run -m unittest discover neo
  - coverage run -m -a unittest discover boa_test
  - pycodestyle prompt.py
  - pycodestyle api-server.py
  - pycodestyle neo
  - pycodestyle examples
  - python prompt.py --version

after_success:
    coveralls

deploy:
  # Deploy to PyPI
  - provider: pypi
    user: CityOfZion
    password:
      secure: QZ3rkZQ6GAGAb52cyU5yG10ILSUwDEIrpCMkj16OaMQ1Gkl2AMWf2SAlLT29j8irVWkPx2Adj49g096wBdbi1SMlFdLHZxorGQYFnV30DrbLNW2Fv1wegzHRq8nMj1drSc19/t9yhb1TcUYsI/eaSZ9JpBf3fjsrBEnS32P2Q5I5OSh35VEA0emo46KyOIhY0+Ajy5OLAN632IQOy6LmkAeIjDfivdEwtfPCEKhqSbh9LbHm5sgh0XzDwqte+2mMrBPVMwuV0PuTFkTzlioXfVsKvVLjD0e1dFiZZUI4ABdKEW0jrhijCP+REOc2O6Wsi0eilVnWYI74AWlX7M2jdm1B43Mu6ZT3VQVMzQ/3zLytp6jiffiFiirMoSNosrjJvl/YZDVqBBETi8jOfZKL2iIqwVt5JGcNHNQMTVSIxEFWJWhAnq/5VdJMSB6w6fXlZFnRlpEAJk0AYhQUYPyyqbU7XPrrAFRevMOEc6q9TRkjZLdzrD2Tt0kIpV8H2IOudWNxc3rpkVYSJ8sLPFwLOtzkwtffUSagFj3gjp7XInt9k09UhFRkU4xAsLb9fV+PBKx+rsRtYF4GiZHXEB3f/BuM+rden2Lrb7uqoTKSyF0Wy1kLLEsevvllTuQvV/EIF1cTzrGLIFAFtWCERStlvIDMHHwGlJW/+oJ8KXX2Pto=
    distributions: sdist bdist_wheel
    on:
      tags: true
      repo: CityOfZion/neo-python

  # Deploy to Docker Hub
  - provider: script
    script: bash docker/travis-deploy-to-docker-hub.sh
